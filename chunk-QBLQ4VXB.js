import{k as D,l as H,m as A}from"./chunk-JGSTCHME.js";import{$ as s,Aa as F,Ba as T,Ca as B,D as d,Da as j,Ea as $,F as y,Ha as U,I as v,Ja as V,L as u,M as f,N as x,O as h,W as l,ba as p,ca as b,da as o,ea as r,fa as _,ga as w,ha as R,ia as O,ja as m,ka as g,la as c,ma as S,na as C,pa as E,qa as M,ra as k,sa as I}from"./chunk-FWO5HR27.js";import"./chunk-3VKTXT47.js";import"./chunk-GKK2QUJP.js";var P=class i{transform(n,e){return n.sort((t,a)=>t[e]<a[e]?-1:t[e]===a[e]?0:(t[e]>a[e]||t[e]>a[e],1))}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=v({name:"orderBy",type:i,pure:!0,standalone:!0})};function L(i,n){if(i&1&&(o(0,"span",31),c(1),r()),i&2){let e=g().$implicit;l(),S(e.estimated)}}function J(i,n){i&1&&(o(0,"span",32),c(1,"Planning"),_(2,"br"),c(3,"Poker"),r())}function K(i,n){i&1&&(o(0,"span"),c(1,"\u2705"),r())}function N(i,n){if(i&1&&(o(0,"div",26)(1,"div",27),s(2,L,2,1,"span",28)(3,J,4,0,"span",29),r(),o(4,"p",30),c(5),s(6,K,2,0,"span",25),r()()),i&2){let e=n.$implicit,t=g();l(2),p("ngIf",t.room==null?null:t.room.displayEstimates),l(),p("ngIf",!(t.room!=null&&t.room.displayEstimates)),l(2),C(" ",e.name," "),l(),p("ngIf",e.estimated)}}function Q(i,n){if(i&1){let e=O();o(0,"button",33),M(1,"async"),m("click",function(){let a=u(e).$implicit,z=g();return f(z.estimatedHandler(a.value))}),c(2),r()}if(i&2){let e,t=n.$implicit,a=g();b("selected",t.value==((e=k(1,4,a.estimatedPlayer$))==null?null:e.estimated)),p("ngClass",t.color),l(2),C(" ",t.value," ")}}function W(i,n){if(i&1){let e=O();w(0),o(1,"div",34)(2,"div",35)(3,"h1",36),c(4,"Planning Poker"),r(),o(5,"p",37),c(6," Estime tarefas com precis\xE3o e agilidade, juntos! "),r(),_(7,"br")(8,"br"),o(9,"app-user-form",38),m("submit$",function(){u(e);let a=g();return f(a.submitUserForm())}),r()()(),R()}}var q=class i{sequence=[{value:"1",color:"bg-primary-subtle"},{value:"2",color:"bg-secondary-subtle"},{value:"3",color:"bg-success-subtle"},{value:"5",color:"bg-info-subtle"},{value:"8",color:"bg-warning-subtle"},{value:"13",color:"bg-danger-subtle"}];showUserForm=!1;players=[];room;selectedEstimate="";estimatedPlayer$;idRoom;router=d(V);activatedRoute=d(U);playerService=d(D);roomService=d(A);constructor(){this.idRoom=this.activatedRoute.snapshot.params.id,this.getRoomById(this.idRoom),this.getPlayersInRoom(),this.getRoom()}submitUserForm(){this.showUserForm=!1,this.roomService.addPlayer(this.idRoom)}displayEstimatesHandler(){this.roomService.updateDisplayEstimated(this.idRoom,!0)}deleteEstimate(){this.roomService.updateDisplayEstimated(this.idRoom,!1),this.roomService.deleteEstimates(this.idRoom).subscribe()}estimatedHandler(n){this.roomService.updateEstimate(this.idRoom,n)}leave(){this.roomService.leave(this.idRoom),this.router.navigateByUrl("/")}get playerName(){let n=this.playerService.get();return n?n.name:""}getRoomById(n){this.roomService.getById(n).subscribe(e=>{if(!e.exists()){this.router.navigate(["**"]);return}if(!this.playerService.get()){this.showUserForm=!0;return}let t=this.playerService.get();if(!t)return;let a=e.val();(!a.players||!a.players[t.id])&&this.roomService.addPlayer(this.idRoom),this.setEstimatedByPlayer()})}getPlayersInRoom(){this.roomService.getPlayers(this.idRoom).subscribe(n=>{this.players=n})}getRoom(){this.roomService.getRoom(this.idRoom).subscribe(n=>{this.room=n})}setEstimatedByPlayer(){this.estimatedPlayer$=this.roomService.getEstimatedByPlayer(this.idRoom)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-room"]],standalone:!0,features:[E],decls:35,vars:7,consts:[[1,"room-page"],[1,"gradient","shadow-lg"],[1,"wrapper-page"],[1,"header","shadow-lg"],[1,"container"],[1,"logo"],[1,"text"],[1,"badge","rounded-pill","text-bg-info"],[1,"action"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-light","btn-sm","dropdown-toggle"],[1,"dropdown-menu"],["type","button",1,"dropdown-item",3,"click"],["href","https://github.com/jeandonialves/planning-poker","target","_blank"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-github"],["d","M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"],[1,"container-page"],[1,"inner-container"],[1,"actions"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"players"],["class","player",4,"ngFor","ngForOf"],[1,"cards"],["class","card shadow",3,"ngClass","selected","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"player"],[1,"card","shadow"],["class","h4",4,"ngIf"],["class","label",4,"ngIf"],[1,"text-center","text-primary-emphasis"],[1,"h4"],[1,"label"],[1,"card","shadow",3,"click","ngClass"],[1,"modal-container"],[1,"modal-body-container"],[1,"h3"],[1,"text-body-secondary"],[3,"submit$"]],template:function(e,t){e&1&&(o(0,"div",0),_(1,"div",1),o(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p",6),c(7,"Planning Poker"),r(),o(8,"span",7),c(9,"Beta"),r()(),o(10,"div",8)(11,"div",9)(12,"button",10),c(13),r(),o(14,"ul",11)(15,"li")(16,"button",12),m("click",function(){return t.leave()}),c(17," Sair "),r()()()(),o(18,"a",13),x(),o(19,"svg",14),_(20,"path",15),r()()()()(),h(),o(21,"div",16)(22,"div",4)(23,"div",17)(24,"div",18)(25,"button",19),m("click",function(){return t.displayEstimatesHandler()}),c(26," Exibir "),r(),o(27,"button",20),m("click",function(){return t.deleteEstimate()}),c(28," Deletar estimativas "),r()(),o(29,"div",21),s(30,N,7,4,"div",22),M(31,"orderBy"),r(),o(32,"div",23),s(33,Q,3,6,"button",24),r()()()()()(),s(34,W,10,0,"ng-container",25)),e&2&&(l(13),C(" ",t.playerName," "),l(17),p("ngForOf",I(31,4,t.players,t.room!=null&&t.room.displayEstimates?"estimated":"name")),l(3),p("ngForOf",t.sequence),l(),p("ngIf",t.showUserForm))},dependencies:[$,F,T,B,j,H,P],styles:[".room-page[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:row}.room-page[_ngcontent-%COMP%] > .gradient[_ngcontent-%COMP%]{width:20px;background-image:radial-gradient(circle at 71.41% 95.91%,#4967da 0,#084198,#001e5b)}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:auto}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:45px}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;gap:5px;align-items:center;justify-content:center}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-weight:600}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]{flex:1;display:flex}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex:1}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;gap:16px;align-items:center;padding:20px 0}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]{flex:5;display:flex;gap:32px;flex-wrap:wrap;padding:20px 0;justify-content:center}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]{width:140px;display:flex;flex-direction:column;gap:12px}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:200px;display:flex;align-items:center;justify-content:center}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{flex:2;display:flex;gap:16px;padding:15px;flex-wrap:wrap}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;min-width:100px;min-height:50px}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:var(--bs-box-shadow-lg)!important}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card.selected[_ngcontent-%COMP%]{border-width:4px}.modal-container[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#00000080;z-index:2;left:0;top:0}.modal-container[_ngcontent-%COMP%] > .modal-body-container[_ngcontent-%COMP%]{padding:32px;background-color:#fff;border-radius:4px;min-width:320px;margin:20px}"]})};export{q as RoomComponent};
