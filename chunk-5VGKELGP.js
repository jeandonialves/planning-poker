import{k as U,l as D,m as V}from"./chunk-AZUTPJP6.js";import{$ as s,Aa as F,Ba as T,Ca as B,D as d,F as v,Fa as $,Ha as j,I as M,L as P,M as f,U as l,Z as p,aa as x,ba as i,ca as r,da as _,ea as h,fa as b,ga as y,ha as m,ia as g,ja as c,ka as w,la as u,na as R,oa as O,pa as S,qa as E,ya as I,za as k}from"./chunk-FKFA34IM.js";import"./chunk-3VKTXT47.js";import"./chunk-GKK2QUJP.js";var C=class o{transform(n,e){return n.sort((t,a)=>t[e]<a[e]?-1:t[e]===a[e]?0:(t[e]>a[e]||t[e]>a[e],1))}static \u0275fac=function(e){return new(e||o)};static \u0275pipe=M({name:"orderBy",type:o,pure:!0,standalone:!0})};function z(o,n){if(o&1&&(i(0,"span",25),c(1),r()),o&2){let e=g().$implicit;l(),w(e.estimated)}}function G(o,n){o&1&&(i(0,"span",26),c(1,"Planning"),_(2,"br"),c(3,"Poker"),r())}function J(o,n){o&1&&(i(0,"span"),c(1,"\u2705"),r())}function K(o,n){if(o&1&&(i(0,"div",20)(1,"div",21),p(2,z,2,1,"span",22)(3,G,4,0,"span",23),r(),i(4,"p",24),c(5),p(6,J,2,0,"span",19),r()()),o&2){let e=n.$implicit,t=g();l(2),s("ngIf",t.room==null?null:t.room.displayEstimates),l(),s("ngIf",!(t.room!=null&&t.room.displayEstimates)),l(2),u(" ",e.name," "),l(),s("ngIf",e.estimated)}}function L(o,n){if(o&1){let e=y();i(0,"button",27),O(1,"async"),m("click",function(){let a=P(e).$implicit,q=g();return f(q.estimatedHandler(a.value))}),c(2),r()}if(o&2){let e,t=n.$implicit,a=g();x("selected",t.value==((e=S(1,4,a.estimatedPlayer$))==null?null:e.estimated)),s("ngClass",t.color),l(2),u(" ",t.value," ")}}function N(o,n){if(o&1){let e=y();h(0),i(1,"div",28)(2,"div",29)(3,"h1",30),c(4,"Planning Poker"),r(),i(5,"p",31),c(6," Estime tarefas com precis\xE3o e agilidade, juntos! "),r(),_(7,"br")(8,"br"),i(9,"app-user-form",32),m("submit$",function(){P(e);let a=g();return f(a.submitUserForm())}),r()()(),b()}}var H=class o{sequence=[{value:"1",color:"bg-primary-subtle"},{value:"2",color:"bg-secondary-subtle"},{value:"3",color:"bg-success-subtle"},{value:"5",color:"bg-info-subtle"},{value:"8",color:"bg-warning-subtle"},{value:"13",color:"bg-danger-subtle"}];showUserForm=!1;players=[];room;selectedEstimate="";estimatedPlayer$;idRoom;router=d(j);activatedRoute=d($);playerService=d(U);roomService=d(V);constructor(){this.idRoom=this.activatedRoute.snapshot.params.id,this.getRoomById(this.idRoom),this.getPlayersInRoom(),this.getRoom()}submitUserForm(){this.showUserForm=!1,this.roomService.addPlayer(this.idRoom)}displayEstimatesHandler(){this.roomService.updateDisplayEstimated(this.idRoom,!0)}deleteEstimate(){this.roomService.updateDisplayEstimated(this.idRoom,!1),this.roomService.deleteEstimates(this.idRoom).subscribe()}estimatedHandler(n){this.roomService.updateEstimate(this.idRoom,n)}leave(){this.roomService.leave(this.idRoom),this.router.navigateByUrl("/")}get playerName(){let n=this.playerService.get();return n?n.name:""}getRoomById(n){this.roomService.getById(n).subscribe(e=>{if(!e.exists()){this.router.navigate(["**"]);return}if(!this.playerService.get()){this.showUserForm=!0;return}let t=this.playerService.get();if(!t)return;let a=e.val();(!a.players||!a.players[t.id])&&this.roomService.addPlayer(this.idRoom),this.setEstimatedByPlayer()})}getPlayersInRoom(){this.roomService.getPlayers(this.idRoom).subscribe(n=>{this.players=n})}getRoom(){this.roomService.getRoom(this.idRoom).subscribe(n=>{this.room=n})}setEstimatedByPlayer(){this.estimatedPlayer$=this.roomService.getEstimatedByPlayer(this.idRoom)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=v({type:o,selectors:[["app-room"]],standalone:!0,features:[R],decls:29,vars:7,consts:[[1,"room-page"],[1,"gradient","shadow-lg"],[1,"wrapper-page"],[1,"header","shadow-lg"],[1,"container"],[1,"text"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-light","btn-sm","dropdown-toggle"],[1,"dropdown-menu"],["type","button",1,"dropdown-item",3,"click"],[1,"container-page"],[1,"inner-container"],[1,"actions"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"players"],["class","player",4,"ngFor","ngForOf"],[1,"cards"],["class","card shadow",3,"ngClass","selected","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"player"],[1,"card","shadow"],["class","h4",4,"ngIf"],["class","label",4,"ngIf"],[1,"text-center","text-primary-emphasis"],[1,"h4"],[1,"label"],[1,"card","shadow",3,"click","ngClass"],[1,"modal-container"],[1,"modal-body-container"],[1,"h3"],[1,"text-body-secondary"],[3,"submit$"]],template:function(e,t){e&1&&(i(0,"div",0),_(1,"div",1),i(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"p",5),c(7,"Planning Poker"),r()(),i(8,"div",6)(9,"button",7),c(10),r(),i(11,"ul",8)(12,"li")(13,"button",9),m("click",function(){return t.leave()}),c(14," Sair "),r()()()()()(),i(15,"div",10)(16,"div",4)(17,"div",11)(18,"div",12)(19,"button",13),m("click",function(){return t.displayEstimatesHandler()}),c(20," Revelar "),r(),i(21,"button",14),m("click",function(){return t.deleteEstimate()}),c(22," Deletar estimativas "),r()(),i(23,"div",15),p(24,K,7,4,"div",16),O(25,"orderBy"),r(),i(26,"div",17),p(27,L,3,6,"button",18),r()()()()()(),p(28,N,10,0,"ng-container",19)),e&2&&(l(10),u(" ",t.playerName," "),l(14),s("ngForOf",E(25,4,t.players,t.room!=null&&t.room.displayEstimates?"estimated":"name")),l(3),s("ngForOf",t.sequence),l(),s("ngIf",t.showUserForm))},dependencies:[B,I,k,F,T,D,C],styles:[".room-page[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:row}.room-page[_ngcontent-%COMP%] > .gradient[_ngcontent-%COMP%]{width:20px;background-image:radial-gradient(circle at 71.41% 95.91%,#4967da 0,#084198,#001e5b)}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:auto}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:45px}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-weight:600}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]{flex:1;display:flex}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex:1}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;gap:16px;align-items:center;padding:20px 0}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]{flex:5;display:flex;gap:32px;flex-wrap:wrap;padding:20px 0;justify-content:center}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]{width:140px;display:flex;flex-direction:column;gap:12px}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:200px;display:flex;align-items:center;justify-content:center}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{flex:2;display:flex;gap:16px;padding:15px;flex-wrap:wrap}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;min-width:100px;min-height:50px}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:var(--bs-box-shadow-lg)!important}.room-page[_ngcontent-%COMP%] > .wrapper-page[_ngcontent-%COMP%] > .container-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card.selected[_ngcontent-%COMP%]{border-width:4px}.modal-container[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#00000080;z-index:2;left:0;top:0}.modal-container[_ngcontent-%COMP%] > .modal-body-container[_ngcontent-%COMP%]{padding:32px;background-color:#fff;border-radius:4px;min-width:320px;margin:20px}"]})};export{H as RoomComponent};
